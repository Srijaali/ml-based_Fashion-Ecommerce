<!DOCTYPE html>
<html>
<head>
    <title>Mock Auth Test</title>
</head>
<body>
    <h1>Mock Auth Test</h1>
    <button onclick="testMockToken()">Generate Mock Token</button>
    <button onclick="clearStorage()">Clear Storage</button>
    <div id="result"></div>

    <script>
        // Function to generate a mock JWT token
        function generateMockToken(userId, userType) {
            const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));
            const payload = btoa(JSON.stringify({ 
                sub: userId.toString(), 
                type: userType,
                exp: Math.floor(Date.now() / 1000) + 3600
            }));
            const signature = btoa('mock_signature');
            
            return `${header}.${payload}.${signature}`;
        }

        // Function to test mock token generation
        function testMockToken() {
            const resultDiv = document.getElementById('result');
            
            try {
                // Generate a mock admin token
                const mockToken = generateMockToken(1, 'admin');
                
                // Store in localStorage
                localStorage.setItem('adminToken', mockToken);
                
                // Create mock admin data
                const mockAdmin = {
                    admin_id: 1,
                    username: 'testadmin',
                    email: 'testadmin@example.com',
                    last_login_at: new Date().toISOString(),
                    is_active: true
                };
                
                // Store admin data
                localStorage.setItem('admin', JSON.stringify(mockAdmin));
                
                resultDiv.innerHTML = '<p style="color: green;">Mock token and admin data created successfully!</p>';
                resultDiv.innerHTML += '<p>Token: ' + mockToken.substring(0, 20) + '...</p>';
                resultDiv.innerHTML += '<p>Admin: ' + JSON.stringify(mockAdmin) + '</p>';
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
            }
        }

        // Function to clear storage
        function clearStorage() {
            localStorage.removeItem('adminToken');
            localStorage.removeItem('admin');
            document.getElementById('result').innerHTML = '<p style="color: blue;">Storage cleared</p>';
        }
    </script>
</body>
</html>